{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nconst useAuth = code => {\n  _s();\n  const [accessToken, setAccessToken] = useState();\n  const [refreshToken, setRefreshToken] = useState();\n  const [expiresIn, setExpiresIn] = useState();\n  useEffect(() => {\n    ;\n    (async () => {\n      try {\n        const {\n          data: {\n            access_token,\n            refresh_token,\n            expires_in\n          }\n        } = await axios.post(`http://localhost:3000/login`, {\n          code\n        });\n        setAccessToken(access_token);\n        setRefreshToken(refresh_token);\n        setExpiresIn(expires_in);\n        window.history.pushState({}, null, \"/\");\n      } catch {\n        window.location = \"/\";\n      }\n    })();\n  }, [code]);\n  useEffect(() => {\n    if (!refreshToken || !expiresIn) return;\n    const interval = setInterval(async () => {\n      try {\n        const {\n          data: {\n            access_token,\n            expires_in\n          }\n        } = await axios.post(`http://localhost:3000/refresh`, {\n          refreshToken\n        });\n        setAccessToken(access_token);\n        setExpiresIn(expires_in);\n      } catch {\n        window.location = \"/\";\n      }\n    }, (expiresIn - 60) * 1000);\n    return () => clearInterval(interval);\n  }, [refreshToken, expiresIn]);\n  return accessToken;\n};\n_s(useAuth, \"E9KOao32uIhQ/xJLaKV8nLvpvcw=\");\nexport default useAuth;","map":{"version":3,"names":["useState","useEffect","axios","useAuth","code","accessToken","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","data","access_token","refresh_token","expires_in","post","window","history","pushState","location","interval","setInterval","clearInterval"],"sources":["/Users/ninatekkey/git/creativeproject-module7-490621/spotify_app/frontend/src/UseAuth.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport axios from \"axios\"\n\nconst useAuth = code => {\n  const [accessToken, setAccessToken] = useState()\n  const [refreshToken, setRefreshToken] = useState()\n  const [expiresIn, setExpiresIn] = useState()\n\n  useEffect(() => {\n    ;(async () => {\n      try {\n        const {\n          data: { access_token, refresh_token, expires_in },\n        } = await axios.post(`http://localhost:3000/login`, {\n          code,\n        })\n        setAccessToken(access_token)\n        setRefreshToken(refresh_token)\n        setExpiresIn(expires_in)\n        window.history.pushState({}, null, \"/\")\n      } catch {\n        window.location = \"/\"\n      }\n    })()\n  }, [code])\n\n  useEffect(() => {\n    if (!refreshToken || !expiresIn) return\n    const interval = setInterval(async () => {\n      try {\n        const {\n          data: { access_token, expires_in },\n        } = await axios.post(`http://localhost:3000/refresh`, {\n          refreshToken,\n        })\n        setAccessToken(access_token)\n        setExpiresIn(expires_in)\n      } catch {\n        window.location = \"/\"\n      }\n    }, (expiresIn - 60) * 1000)\n\n    return () => clearInterval(interval)\n  }, [refreshToken, expiresIn])\n\n  return accessToken\n}\n\nexport default useAuth"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAGC,IAAI,IAAI;EAAA;EACtB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGN,QAAQ,EAAE;EAChD,MAAM,CAACO,YAAY,EAAEC,eAAe,CAAC,GAAGR,QAAQ,EAAE;EAClD,MAAM,CAACS,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,EAAE;EAE5CC,SAAS,CAAC,MAAM;IACd;IAAC,CAAC,YAAY;MACZ,IAAI;QACF,MAAM;UACJU,IAAI,EAAE;YAAEC,YAAY;YAAEC,aAAa;YAAEC;UAAW;QAClD,CAAC,GAAG,MAAMZ,KAAK,CAACa,IAAI,CAAE,6BAA4B,EAAE;UAClDX;QACF,CAAC,CAAC;QACFE,cAAc,CAACM,YAAY,CAAC;QAC5BJ,eAAe,CAACK,aAAa,CAAC;QAC9BH,YAAY,CAACI,UAAU,CAAC;QACxBE,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC;MACzC,CAAC,CAAC,MAAM;QACNF,MAAM,CAACG,QAAQ,GAAG,GAAG;MACvB;IACF,CAAC,GAAG;EACN,CAAC,EAAE,CAACf,IAAI,CAAC,CAAC;EAEVH,SAAS,CAAC,MAAM;IACd,IAAI,CAACM,YAAY,IAAI,CAACE,SAAS,EAAE;IACjC,MAAMW,QAAQ,GAAGC,WAAW,CAAC,YAAY;MACvC,IAAI;QACF,MAAM;UACJV,IAAI,EAAE;YAAEC,YAAY;YAAEE;UAAW;QACnC,CAAC,GAAG,MAAMZ,KAAK,CAACa,IAAI,CAAE,+BAA8B,EAAE;UACpDR;QACF,CAAC,CAAC;QACFD,cAAc,CAACM,YAAY,CAAC;QAC5BF,YAAY,CAACI,UAAU,CAAC;MAC1B,CAAC,CAAC,MAAM;QACNE,MAAM,CAACG,QAAQ,GAAG,GAAG;MACvB;IACF,CAAC,EAAE,CAACV,SAAS,GAAG,EAAE,IAAI,IAAI,CAAC;IAE3B,OAAO,MAAMa,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,CAACb,YAAY,EAAEE,SAAS,CAAC,CAAC;EAE7B,OAAOJ,WAAW;AACpB,CAAC;AAAA,GA3CKF,OAAO;AA6Cb,eAAeA,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}